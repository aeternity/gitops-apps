app:
  image:
    repository: aeternity/graffiti-server
    tag: "latest"
    pullPolicy: "Always"

  secrets:
    values:
      S3_KEY: /apps/GRAFFITI_S3_KEY
      S3_SECRET: /apps/GRAFFITI_S3_SECRET

  service:
    port: 3000

  probes:
    liveness:
      enabled: false
      config:
        httpGet:
          path: /health/testFiles
        initialDelaySeconds: 120
        periodSeconds: 120
        successThreshold: 1
        timeoutSeconds: 60
    readiness:
      enabled: false
      config:
        httpGet:
          path: /health/testFiles
        initialDelaySeconds: 120
        periodSeconds: 120
        successThreshold: 1
        timeoutSeconds: 60

  ingress:
    enabled: true
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      cert-manager.io/cluster-issuer: letsencrypt

  persistence:
    enabled: true
    accessMode: ReadWriteOnce
    storageClass: gp2
    size: 50Gi
    mountPath: /app/data/
  
  init: 
    enabled: true
    command: ["/bin/sh"]
    args:
      - -c
      - >-
        mkdir -p /data/rendered
        mkdir -p /data/backup
  env:
    "S3_REGION": "eu-central-1"
    "AETERNITY_URL": "https://testnet.aeternity.io"
    "CONTRACT_ADDRESS": "ct_uJ5NKmuX7eX79QPerixR7Z8zEdxKCKJw1yzHjX1tsmRP17tuP"
    "PATH_IDENTIFIER": "/"
    "BACKUP_REMOTE": "true"
    "BACKUP_IPFS": "true"
